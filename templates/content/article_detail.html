{% extends 'base.html' %}

{% block title %}{{ article.title }} - –ö–∏—Ç–∞–π—Å–∫–∞—è –∫—É–ª—å—Ç—É—Ä–∞{% endblock %}

{% block content %}
<div class="container">
    <article style="max-width: 800px; margin: 0 auto;">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –º–µ—Ç–∞-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <header style="margin-bottom: 30px;">
            <h1>{{ article.title }}</h1>
            <div style="display: flex; gap: 15px; color: #666; margin: 15px 0; flex-wrap: wrap;">
                <span>üìÖ {{ article.created_at|date:"d M Y" }}</span>
                <span>üè∑Ô∏è {{ article.category.name }}</span>
                <span>üëÅÔ∏è {{ article.views }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
                <span>‚úçÔ∏è {{ article.author.username }}</span>
            </div>
        </header>

        <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
        {% if article.image %}
        <div style="margin-bottom: 30px;">
            <img src="{{ article.image.url }}" alt="{{ article.title }}" style="width: 100%; max-height: 400px; object-fit: cover; border-radius: 8px;">
        </div>
        {% endif %}

        <!-- –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
        <div style="line-height: 1.6; font-size: 16px;">
            {{ article.content|linebreaks }}
        </div>

        <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
        <section style="margin-top: 50px;">
            <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ({{ comments.count }})</h3>

            {% for comment in comments %}
            <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                    <strong>{{ comment.author.username }}</strong>
                    <small style="color: #666;">{{ comment.created_at|date:"d M Y H:i" }}</small>
                </div>
                <p style="margin: 0;">{{ comment.text }}</p>
            </div>
            {% empty %}
            <p style="text-align: center; color: #666; padding: 20px;">
                –ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å—Ç–µ –ø–µ—Ä–≤—ã–º!
            </p>
            {% endfor %}

            <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
            {% if user.is_authenticated %}
            <div style="margin-top: 30px;">
                <h4>–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h4>
                <form method="post" action="{% url 'content:add_comment' article.id %}">
                    {% csrf_token %}
                    <textarea name="text" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 10px;" rows="4" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
                    <button type="submit" class="btn" style="background: #3498db;">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </form>
            </div>
            {% else %}
            <p style="text-align: center; margin-top: 20px;">
                <a href="{% url 'admin:login' %}">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
            </p>
            {% endif %}
        </section>
    </article>
</div>
{% endblock %}