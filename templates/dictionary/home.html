{% extends 'base.html' %}
{% load pinyin_filters %}

{% block title %}–†—É—Å—Å–∫–æ-–∫–∏—Ç–∞–π—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å{% endblock %}

{% block content %}
<div class="card">
    <h1>üìö –†—É—Å—Å–∫–æ-–∫–∏—Ç–∞–π—Å–∫–∏–π —Å–ª–æ–≤–∞—Ä—å</h1>
    <p>–ù–∞—à —Å–ª–æ–≤–∞—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª–µ–µ <strong>{{ total_words }}</strong> —Å–ª–æ–≤ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å <strong>—Ü–≤–µ—Ç–æ–≤—ã–º –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–æ–Ω–æ–≤</strong> –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏—è.</p>


    <div class="search-section" style="background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%); padding: 2rem; border-radius: 12px; margin: 2rem 0;">
        <h2>üîç –ü–æ–∏—Å–∫ —Å–ª–æ–≤</h2>
        <form method="get" action="{% url 'dictionary:search' %}" class="search-form">
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                <input type="text" name="q" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–ª–æ–≤–æ –¥–ª—è –ø–æ–∏—Å–∫–∞..."
                       value="{{ query }}" style="flex: 1; padding: 12px; border: 2px solid #c62828; border-radius: 8px;">
                <select name="type" style="padding: 12px; border: 2px solid #c62828; border-radius: 8px;">
                    <option value="ru-zh">–†—É—Å—Å–∫–∏–π ‚Üí –ö–∏—Ç–∞–π—Å–∫–∏–π</option>
                    <option value="zh-ru">–ö–∏—Ç–∞–π—Å–∫–∏–π ‚Üí –†—É—Å—Å–∫–∏–π</option>
                </select>
            </div>
            <button type="submit" class="btn" style="width: 100%;">–ù–∞–π—Ç–∏ —Å–ª–æ–≤–æ</button>
        </form>
    </div>
</div>


<div class="card">
    <h2>üé® –õ–µ–≥–µ–Ω–¥–∞ —Ç–æ–Ω–æ–≤ –ø–∏–Ω—å–∏–Ω—è</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(130px, 1fr)); gap: 10px; margin-top: 15px;">
        <div style="text-align: center; padding: 12px; border-radius: 8px; background: #f8f9fa; border: 2px solid #FFA500;">
            <div style="color: #FFA500; font-size: 20px; font-weight: bold;">mƒÅ</div>
            <div style="font-weight: bold;">–ü–µ—Ä–≤—ã–π —Ç–æ–Ω</div>
            <small style="color: #666;">–í—ã—Å–æ–∫–∏–π —Ä–æ–≤–Ω—ã–π</small>
        </div>
        <div style="text-align: center; padding: 12px; border-radius: 8px; background: #f8f9fa; border: 2px solid #008000;">
            <div style="color: #008000; font-size: 20px; font-weight: bold;">m√°</div>
            <div style="font-weight: bold;">–í—Ç–æ—Ä–æ–π —Ç–æ–Ω</div>
            <small style="color: #666;">–í–æ—Å—Ö–æ–¥—è—â–∏–π</small>
        </div>
        <div style="text-align: center; padding: 12px; border-radius: 8px; background: #f8f9fa; border: 2px solid #4169E1;">
            <div style="color: #4169E1; font-size: 20px; font-weight: bold;">m«é</div>
            <div style="font-weight: bold;">–¢—Ä–µ—Ç–∏–π —Ç–æ–Ω</div>
            <small style="color: #666;">–ù–∏–∑–∫–∏–π</small>
        </div>
        <div style="text-align: center; padding: 12px; border-radius: 8px; background: #f8f9fa; border: 2px solid #8B0000;">
            <div style="color: #8B0000; font-size: 20px; font-weight: bold;">m√†</div>
            <div style="font-weight: bold;">–ß–µ—Ç–≤–µ—Ä—Ç—ã–π —Ç–æ–Ω</div>
            <small style="color: #666;">–ù–∏—Å—Ö–æ–¥—è—â–∏–π</small>
        </div>
        <div style="text-align: center; padding: 12px; border-radius: 8px; background: #f8f9fa; border: 2px solid #A9A9A9;">
            <div style="color: #A9A9A9; font-size: 20px; font-weight: bold;">ma</div>
            <div style="font-weight: bold;">–ù–µ–π—Ç—Ä–∞–ª—å–Ω—ã–π</div>
            <small style="color: #666;">–õ–µ–≥–∫–∏–π</small>
        </div>
    </div>
</div>


<div class="card">
    <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–ª–æ–≤–∞—Ä—è</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 20px;">
        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
            <div style="font-size: 24px; font-weight: bold; color: #c62828;">{{ total_words }}</div>
            <div style="font-size: 14px; color: #666;">–í—Å–µ–≥–æ —Å–ª–æ–≤</div>
        </div>
        {% for level, count in words_by_hsk.items %}
        <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
            <div style="font-size: 24px; font-weight: bold; color: #c62828;">{{ count }}</div>
            <div style="font-size: 14px; color: #666;">{{ level }}</div>
        </div>
        {% endfor %}
    </div>
</div>


<div class="card">
    <h2>üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å–ª–æ–≤–∞</h2>
    <div class="word-grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 15px; margin-top: 20px;">
        {% for word in featured_words %}
        <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #c62828; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: transform 0.3s ease;">
            <div style="font-weight: bold; color: #c62828; font-size: 16px; margin-bottom: 8px;">{{ word.russian }}</div>

            <!-- –¶–≤–µ—Ç–Ω—ã–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã -->
            <div style="font-size: 24px; margin: 8px 0; font-weight: bold; min-height: 40px;">
                {{ word.chinese_simplified|colorize_characters:word.pinyin }}
            </div>

            <!-- –¶–≤–µ—Ç–Ω–æ–π –ø–∏–Ω—å–∏–Ω—å —Å —Ç–æ–Ω–∞–º–∏ -->
            <div style="color: #666; font-size: 14px; min-height: 50px; line-height: 1.4;">
                {{ word.pinyin|colorize_pinyin }}
            </div>

            <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px; font-size: 12px; color: #888;">
                <span>{{ word.get_part_of_speech_display }}</span>
                <span>HSK {{ word.hsk_level }}</span>
            </div>

            <a href="{% url 'dictionary:word_detail' word.id %}" style="display: block; margin-top: 12px; color: #c62828; text-decoration: none; font-size: 14px; text-align: center; padding: 5px; border: 1px solid #c62828; border-radius: 4px; transition: all 0.3s ease;">
                –ü–æ–¥—Ä–æ–±–Ω–µ–µ ‚Üí
            </a>
        </div>
        {% empty %}
        <div style="text-align: center; padding: 2rem; color: #666; grid-column: 1 / -1;">
            <p>üòî –°–ª–æ–≤–∞ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–ª–æ–≤–∞—Ä—å</p>
            <a href="/admin/dictionary/word/add/" class="btn" style="margin-top: 10px;">–î–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É</a>
        </div>
        {% endfor %}
    </div>
</div>


<div class="card">
    <h2>–°–ª–æ–≤–∞ –ø–æ —É—Ä–æ–≤–Ω—è–º HSK</h2>
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-top: 20px;">
        {% for level in "123456" %}
        <a href="{% url 'dictionary:words_by_hsk' forloop.counter %}"
           class="btn"
           style="background: linear-gradient(135deg, #c62828, #e53935); text-align: center; padding: 12px;">
            HSK {{ level }}
        </a>
        {% endfor %}
    </div>
</div>

<style>
.word-grid > div:hover {
    transform: translateY(-5px);
    box-shadow: 0 5px 15px rgba(198, 40, 40, 0.2);
}

.word-grid a:hover {
    background: #c62828;
    color: white;
}
</style>
{% endblock %}